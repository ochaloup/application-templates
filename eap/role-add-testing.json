{
    "kind": "Template",
    "apiVersion": "v1",
    "metadata": {
        "name": "role-testing"
    },
    "parameters": [
        {
            "displayName": "Namespace",
            "description": "Namespace the service account default will be permitted to list pods",
            "name": "NAMESPACE",
            "value": "myproject",
            "required": true
        }
    ],
    "objects": [
        {
            "apiVersion": "v1",
            "kind": "Role",
            "metadata": {
                "name": "pods-listing"
            },
            "rules": [
                {
                    "apiGroups": null,
                    "attributeRestrictions": null,
                    "resources": ["pods"],
                    "verbs": ["list"]
                }
            ]
        },
        {
            "apiVersion": "v1",
            "kind": "RoleBinding",
            "metadata": {
                "name": "default",
                "annotations": {
                    "description": "Default service account"
                }
            },
            "subjects": [
                {
                    "kind": "ServiceAccount",
                    "name": "default",
                    "namespace": "${NAMESPACE}"
                }
            ],
            "roleRef": {
                "kind": "Role",
                "name": "pods-listing",
                "namespace": "${NAMESPACE}"
            }
        }
    ]
}
